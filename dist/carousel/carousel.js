/*! License details at fancyapps.com/license */
import{isPlainObject as e}from"../utils/isPlainObject.js";import{isNode as t}from"../utils/isNode.js";import{isString as n}from"../utils/isString.js";import{getScrollableParent as i}from"../utils/getScrollableParent.js";import{getDirectChildren as o}from"../utils/getDirectChildren.js";import{extend as s}from"../utils/extend.js";import{map as r}from"../utils/map.js";import{stringToHtml as l}from"../utils/strToHtml.js";import{clamp as a}from"../utils/clamp.js";import{addClass as c}from"../utils/addClass.js";import{removeClass as d}from"../utils/removeClass.js";import{toggleClass as u}from"../utils/toggleClass.js";import{Tween as f}from"../libs/tween.js";import{Gestures as p}from"../libs/gestures.js";import{en_EN as v}from"./l10n/en_EN.js";const m=e=>{e.cancelable&&e.preventDefault()},g={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:v,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:200,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let h,b=0;const E=(v,w={},y={})=>{b++;let M,x,S,j,P,L=0,T=Object.assign({},g),O=Object.assign({},g),R={},A=null,C=null,H=!1,V=!1,$=!1,z=!1,D="height",F=0,q=!0,I=0,B=0,k=0,N=0,_="*",G=[],X=[];const Y=new Set;let J=[],K=[],Q=0,U=0;function W(e,...t){let n=O[e];return n&&n instanceof Function?n(Oe,...t):n}function Z(e,t=[]){const n=W("l10n")||{};e=String(e).replace(/\{\{(\w+)\}\}/g,((e,t)=>n[t]||e));for(let n=0;n<t.length;n++)e=e.split(t[n][0]).join(t[n][1]);return e=e.replace(/\{\{(.*?)\}\}/g,((e,t)=>t))}const ee=new Map;function te(e,...t){const n=ee.get(e)||[];O.on&&n.push(O.on[e]);for(const e of n)e&&e instanceof Function&&e(Oe,...t);"*"!==e&&te("*",e,...t)}function ne(){var t,n;const r=s({},g,T);s(r,g,T);let l="";const u=T.breakpoints||{};if(u)for(const[e,t]of Object.entries(u))window.matchMedia(e).matches&&(l+=e,s(r,t));if(void 0===P||l!==P){if(P=l,0!==L){let e=null===(n=null===(t=K[I])||void 0===t?void 0:t.slides[0])||void 0===n?void 0:n.index;void 0===e&&(e=O.initialSlide),r.initialSlide=e,r.slides=[];for(const e of G)e.isVirtual&&r.slides.push(e)}Te(),O=r,!1!==O.enabled&&(L=0,te("init"),function(){for(const[e,t]of Object.entries(Object.assign(Object.assign({},y),O.plugins||{})))if(e&&!R[e]&&t instanceof Function){const n=t();n.init(Oe,E),R[e]=n}te("initPlugins")}(),function(){if(!A)return;const t=W("classes")||{};c(A,t.container),c(A,t.isEnabled);const n=W("style");if(n&&e(n))for(const[e,t]of Object.entries(n))A.style.setProperty(e,t);C=A.querySelector(`.${t.viewport}`),C||(C=document.createElement("div"),c(C,t.viewport),C.append(...o(A,`.${t.slide}`)),A.insertAdjacentElement("afterbegin",C)),H="visible"===window.getComputedStyle(C).getPropertyValue("overflow"),A.carousel=Oe,te("initLayout")}(),function(){if(!C)return;const e=W("classes")||{};G=[],[...o(C,`.${e.slide}`)].forEach((e=>{e.parentElement&&(G.push(pe(Object.assign({el:e,isVirtual:!1},e.dataset||{}))),e.parentElement.removeChild(e))})),fe(W("slides"));for(const e of G)te("addSlide",e);te("initSlides")}(),x=f().on("start",(()=>{q=!1,M&&M.isPointerDown()||(se(),Le())})).on("step",(e=>{F=e.pos,Le()})).on("end",(e=>{(null==M?void 0:M.isPointerDown())||(F=e.pos,x&&!V&&(F<k||F>N)?x.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:a(k,F,N)}).start():q||(q=!0,te("settle")))})),function(){const e=W("gestures");C&&!1!==e&&(M=p(C,e).on("start",(e=>{var t,n;if(!x)return;const{srcEvent:i}=e;function o(e){const t=window.getComputedStyle(e),n=new DOMMatrixReadOnly(t.transform);return{width:n.m41||0,height:n.m42||0}}z&&m(i),x.pause(),x.getCurrentVelocities().pos=0;const s=null===(t=K[I])||void 0===t?void 0:t.slides[0];s&&Y.has(s.index)&&s.el&&(F=s.offset||0,F+=(o(s.el)[D]||0)*($&&!z?1:-1)),we(),V||(F<k||F>N)&&x.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:(null===(n=x.getCurrentVelocities())||void 0===n?void 0:n.pos)||0,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:a(k,F,N)}).start()})).on("move",(e=>{const{srcEvent:t,axis:n}=e,o=e.srcEvent.target;o&&i(o)||(n||(t.stopPropagation(),t.stopImmediatePropagation()),("y"===n&&z||"x"===n&&!z)&&(m(t),t.stopPropagation()))})).on("panstart",(e=>{(null==e?void 0:e.axis)===(z?"y":"x")&&c(C,"is-dragging")})).on("panend",(()=>{d(C,"is-dragging")})).on("pan",(e=>{var t;const{deltaX:n,deltaY:i,currentTouch:o,axis:s}=e;if(!x)return;if(o.length>1)return;if("y"===s&&!z||"x"===s&&z)return;const r=$&&!z?1:-1;let l=z?i:n,a=(null==x?void 0:x.isRunning())?x.getEndValues().pos:F,c=1;V||(a<=k&&l*r<0?(c=Math.max(.01,1-Math.abs(1/de()*Math.abs(a-k))),c*=.2):a>=N&&l*r>0&&(c=Math.max(.01,1-Math.abs(1/de()*Math.abs(a-N))),c*=.2)),a+=l*c*r,x.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:(null===(t=x.getCurrentVelocities())||void 0===t?void 0:t.pos)||0,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:a}).start()})).on("end",(e=>{var t,n;const{axis:i,velocityX:o,velocityY:s,currentTouch:r}=e,l=K.length,c=W("dragFree");if(r.length>0||!x)return;if(!l)return;const d=W("vertical")?s:o;let u=(null==x?void 0:x.isRunning())?x.getEndValues().pos:F;const f=$&&!z?1:-1;if(u+=d*(c?5:1)*f,!V&&(d*f<=0&&u<k||d*f>=0&&u>N)){let e=0;return Math.abs(d)>0&&(e=2*Math.abs(d),e=Math.min(.3*de(),e)),u=a(k+-1*e,u,N+e),void x.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*d,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:u}).start()}if(c||(null===(t=R.Autoscroll)||void 0===t?void 0:t.isEnabled()))return void(Math.abs(d)>10?x.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*d,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:u}).start():x.isRunning()||q||(q=!0,te("settle")));if(!c&&!(null===(n=R.Autoscroll)||void 0===n?void 0:n.isEnabled())&&(!e.offsetX&&!e.offsetY||"y"===i&&!z||"x"===i&&z))return void Pe(I,{transition:"tween"});let p=ae(u);Math.abs(d)>10&&p===I&&(p+=d>0?$&&!z?1:-1:$&&!z?-1:1),Pe(p,{transition:"tween",tween:{tension:160,friction:25,velocity:-1*d}})})).init())}(),be(),function(){if(A&&(A.addEventListener("click",Me,{passive:!1}),document.addEventListener("mousemove",ie),!S)){let e=null;S=new ResizeObserver((t=>{e||(e=requestAnimationFrame((()=>{!function(e){if(!A)return;let t=e[0].contentBoxSize[0].blockSize,n=e[0].contentBoxSize[0].inlineSize;if(0===L)return Q=t,U=n,L=1,Le(),re(),void te("ready");if(1!==L)return;const i=K.length;be();const o=A.getBoundingClientRect();t=o.height,n=o.width,i>1&&(z&&Math.abs(t-Q)<.5||!z&&Math.abs(n-U)<.5)||(Q=t,U=n,z&&!t||!z&&!n||A&&C&&(i===K.length&&(null==M?void 0:M.isPointerDown())||(W("dragFree")&&(V||F>k&&F<N)?(se(),Le()):Pe(I,{transition:!1}))))}(t),e=null})))})),S.observe(A)}}())}}function ie(e){h=e}function oe(e="*"){var t;const n=[];for(const i of G)("*"===e||i.class&&i.class.includes(e)||i.el&&(null===(t=i.el)||void 0===t?void 0:t.classList.contains(e)))&&n.push(i);j=void 0,_=e,X=[...n]}function se(){if(!x)return;const e=ae((null==x?void 0:x.isRunning())?x.getEndValues().pos:F);e!==I&&(j=I,I=e,je(),re(),le(),te("change",I,j))}function re(){var e;if(!A)return;u(C,"is-draggable",!!M&&K.length>0);for(const e of A.querySelectorAll("[data-carousel-index]"))e.innerHTML=I+"";for(const e of A.querySelectorAll("[data-carousel-page]"))e.innerHTML=I+1+"";for(const e of A.querySelectorAll("[data-carousel-pages]"))e.innerHTML=K.length+"";let t=!1;const n=null===(e=K[I])||void 0===e?void 0:e.slides[0];n&&(n.downloadSrc||"image"===n.type&&n.src)&&(t=!0);for(const e of A.querySelectorAll("[data-carousel-download]"))e.toggleAttribute("aria-disabled",!t)}function le(e){var t;if(!A)return;e||(e=null===(t=K[I])||void 0===t?void 0:t.slides[0]);const n=e.el;if(n)for(const t of n.querySelectorAll("[data-slide-index]"))t.innerHTML=e.index+1+""}function ae(e){if(!K.length||!x)return 0;const t=ue();let n=e;V?n-=Math.floor((e-K[0].pos)/t)*t:n=a(K[0].pos,e,K[K.length-1].pos);const i=new Map;let o=0;for(const e of K){const s=Math.abs(e.pos-n),r=Math.abs(e.pos-n-t),l=Math.abs(e.pos-n+t),a=Math.min(s,r,l);i.set(o,a),o++}const s=i.size>0?[...i.entries()].reduce(((e,t)=>t[1]<e[1]?t:e)):[I,0];return parseInt(s[0])}function ce(){return C&&parseFloat(getComputedStyle(C).getPropertyValue("--f-carousel-gap"))||0}function de(){return C&&C.getBoundingClientRect()[D]||0}function ue(e=!0){const t=ce();return X.reduce(((e,t)=>e+t.dim),0)+(X.length-(V&&e?0:1))*t}function fe(e,t){const n=[];for(const t of Array.isArray(e)?e:[e]){const e=pe(Object.assign(Object.assign({},t),{isVirtual:!0}));n.push(e)}G.splice(void 0===t?G.length:t,0,...n),he();for(const e of n)ve(e);return oe(_),n}function pe(e){return(n(e)||e instanceof HTMLElement)&&(e={html:e}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},e)}function ve(e){if(!e)return;let t=e.el;t||(t=document.createElement("div"),e.el=t);const n=e.html?e.html instanceof HTMLElement?e.html:l(e.html):void 0;n&&(c(n,"f-html"),e.htmlEl=n,c(t,"has-html"),t.append(n),te("contentReady",e))}function me(e){if(!C||!e)return;let t=e.el;if(t){if(t.setAttribute("index",e.index+""),t.parentElement!==C){let n;c(t,O.classes.slide),c(t,e.class),je(e);for(const t of G)if(t.index>e.index){n=t.el;break}C.insertBefore(t,n&&C.contains(n)?n:null),re(),le(e),te("attachSlideEl",e)}return t}}function ge(e){const t=null==e?void 0:e.el;t&&(t.remove(),Ee(t),te("detachSlideEl",e))}function he(){for(let e=0;e<G.length;e++){const t=G[e],n=t.el;n&&(t.index!==e&&Ee(n),n.setAttribute("index",`${e}`)),t.index=e}}function be(){var e,n,i,o;if(!A||!C)return;$=W("rtl"),z=W("vertical"),D=z?"height":"width";const s=W("classes");u(A,s.isLTR,!$),u(A,s.isRTL,$),u(A,s.isHorizontal,!z),u(A,s.isVertical,z),u(A,s.hasAdaptiveHeight,W("adaptiveHeight"));const r=C.getBoundingClientRect();if(!r.width&&!r.height)return;const l=function(){let e=0;if(C){let t=document.createElement("div");c(t,O.classes.slide),C.appendChild(t),e=t.getBoundingClientRect()[D],t.remove(),t=void 0}return e}();for(const n of X){const i=n.el;let o=0;if(!n.isVirtual&&i&&t(i)){let t=!1;i.parentElement&&i.parentElement===C||(C.appendChild(i),t=!0),o=i.getBoundingClientRect()[D],t&&(null===(e=i.parentElement)||void 0===e||e.removeChild(i))}else o=l;n.dim=o}if(function(){if(!A)return;he();const e=de(),t=ce(),n=ue(!1);let i=W("slidesPerPage");i="auto"===i?1/0:parseFloat(i+""),K=[];let o=0,s=0;for(const n of X)(!K.length||o+n.dim-e>.05||s>=i)&&(K.push({index:K.length,slides:[],dim:0,offset:0,pos:0}),o=0,s=0),K[K.length-1].slides.push(n),o+=n.dim+t,s++;const r=W("center"),l=W("fill"),c=W("infinite");let d=0;for(const i of K){i.dim=(i.slides.length-1)*t;for(const e of i.slides)i.dim+=e.dim;i.offset=d,i.pos=d,!1!==r&&(i.pos-=.5*(e-i.dim)),l&&!c&&n>e&&(i.pos=a(0,i.pos,n-e)),d+=i.dim+t}const u=[];let f;for(const e of K){const t=Object.assign({},e);f&&t.pos===f.pos?(f.dim+=t.dim,f.slides=[...f.slides,...t.slides]):(f=t,t.index=u.length,u.push(t))}K=u}(),V=W("infinite")&&K.length>1&&ue()-(de()+((null===(n=X[0])||void 0===n?void 0:n.dim)||0))>-.5,k=(null===(i=K[0])||void 0===i?void 0:i.pos)||0,N=(null===(o=K[K.length-1])||void 0===o?void 0:o.pos)||0,0===L)!function(){var e;j=void 0,I=W("initialPage");const t=W("initialSlide")||void 0;void 0!==t&&(I=Oe.getPageIndex(t)||0),I=a(0,I,K.length-1),F=(null===(e=K[I])||void 0===e?void 0:e.pos)||0,B=F}();else{const e=(null==x?void 0:x.isRunning())?x.getEndValues().pos:F;(e<k||e>N)&&(I=a(0,I,K.length-1))}te("refresh")}function Ee(e){if(!e||!t(e))return;const n=parseInt(e.getAttribute("index")||"-1");let i="";for(const t of Array.from(e.classList)){const e=t.match(/^f-(\w+)(Out|In)$/);e&&e[1]&&(i=e[1]+"")}if(!e||!i)return;const o=[`f-${i}Out`,`f-${i}In`,"to-prev","to-next","from-prev","from-next"];e.removeEventListener("animationend",ye),d(e,o.join(" ")),Y.delete(n)}function we(){if(!C)return;const e=Y.size;for(const e of X)Ee(e.el);Y.clear(),e&&Le()}function ye(e){"f-"===e.animationName.substring(0,2)&&(Ee(e.target),Y.size||(d(A,"in-transition"),!q&&Math.abs(Oe.getPosition(!0)-B)<.5&&(q=!0,te("settle"))),Le())}function Me(e){if(e.defaultPrevented)return;const t=e.composedPath()[0];if(t.closest("[data-carousel-go-prev]"))return m(e),void Oe.prev();if(t.closest("[data-carousel-go-next]"))return m(e),void Oe.next();const n=t.closest("[data-carousel-go-to]");if(n)return m(e),void Oe.goTo(parseFloat(n.dataset.carouselGoTo||"")||0);if(t.closest("[data-carousel-download]")){m(e);const t=K[I].slides[0];if(t.downloadSrc||"image"===t.type&&t.src){const e=t.downloadFilename,n=document.createElement("a"),i=t.downloadSrc||t.src||"";n.href=i,n.target="_blank",n.download=e||i,n.click()}}else te("click",e)}function xe(e){var t;const n=e.el;n&&(null===(t=n.querySelector(".f-spinner"))||void 0===t||t.remove(),d(n,"is-loading"))}function Se(e){var t;const n=e.el;n&&(null===(t=n.querySelector(".f-html.is-error"))||void 0===t||t.remove(),d(n,"has-error"))}function je(e){var t;e||(e=null===(t=K[I])||void 0===t?void 0:t.slides[0]);const i=null==e?void 0:e.el;if(!i)return;let o=W("formatCaption",e);void 0===o&&(o=e.caption),o=o||"";const s=W("captionEl");if(s&&s instanceof HTMLElement){if(e.index!==I)return;if(n(o)&&(s.innerHTML=Z(o+"")),o instanceof HTMLElement){if(o.parentElement===s)return;s.innerHTML="",o.parentElement&&(o=o.cloneNode(!0)),s.append(o)}return}if(!o)return;let r=e.captionEl||i.querySelector(".f-caption");!r&&o instanceof HTMLElement&&o.classList.contains("f-caption")&&(r=o),r||(r=document.createElement("div"),c(r,"f-caption"),n(o)?r.innerHTML=Z(o+""):o instanceof HTMLElement&&(o.parentElement&&(o=o.cloneNode(!0)),r.append(o)));const l=`f-caption-${b}_${e.index}`;r.setAttribute("id",l),r.dataset.selectable="true",c(i,"has-caption"),i.setAttribute("aria-labelledby",l),e.captionEl=r,i.insertAdjacentElement("beforeend",r)}function Pe(t,i){let{transition:o,tween:s}=Object.assign({transition:O.transition,tween:O.tween},i||{});if(!A||!x)return;const r=K.length;if(!r)return;if(function(e,t){var i,o,s;if(!A||!x||!t||!n(t)||"tween"===t||J.length>1)return!1;const r=K.length;let l=e>I?1:-1;e=V?(e%r+r)%r:a(0,e,r-1),$&&(l*=-1);const u=null===(i=K[I])||void 0===i?void 0:i.slides[0],f=null==u?void 0:u.index,p=null===(o=K[e])||void 0===o?void 0:o.slides[0],v=null==p?void 0:p.index,m=null===(s=K[e])||void 0===s?void 0:s.pos;if(void 0===v||void 0===f||f===v||F===m||Math.abs(de()-((null==p?void 0:p.dim)||0))>1)return!1;q=!1,x.pause(),we(),c(A,"in-transition"),F=B=m,se();const g=me(u),h=me(p);return g&&(Y.add(f),g.style.transform="",g.addEventListener("animationend",ye),d(g,O.classes.isSelected),c(g,`f-${t}Out to-${l>0?"next":"prev"}`)),h&&(Y.add(v),h.style.transform="",h.addEventListener("animationend",ye),c(h,O.classes.isSelected),c(h,`f-${t}In from-${l>0?"prev":"next"}`)),Le(),!0}(t,o))return;t=V?(t%r+r)%r:a(0,t,r-1),B=K[t||0].pos||0;const l=x.isRunning()?x.getEndValues().pos:F;if(Math.abs(B-l)<1)return F=B,I!==t&&(je(),re(),le(),j=I,I=t,te("change",I,j)),Le(),void(q||(q=!0,te("settle")));if(x.pause(),we(),V){const e=ue(),t=Math.floor((l-K[0].pos)/e),n=B+t*e;B=[n+e,n,n-e].reduce((function(e,t){return Math.abs(t-l)<Math.abs(e-l)?t:e}))}!1!==o&&e(s)?x.spring(s).from({pos:F}).to({pos:B}).start():(F=B,se(),Le(),q||(q=!0,te("settle")))}function Le(){var e;if(!A||!C)return;const t=K[I],n=function(e){const t=ce(),n=ue();let i=de();if(!C)return[];const o=[];if(!n||!i)return[];e=void 0===e?F:e,V&&(e-=Math.floor(e/n)*n);let s=0,r=0;if(H){const e=C.getBoundingClientRect();s=e.left,r=e.right-e.width}let l=0;for(let a of X){const c=(t=0)=>{o.indexOf(a)>-1||(a.pos=l-e+t||0,a.offset+t>e-a.dim-s+.51&&a.offset+t<e+i+r-.51&&o.push(a))};if(a.offset=l,V)for(let e=-1;e<=1;e++)c(n*e);else c();l+=a.dim+t}return o}(),i=new Set,s=new Set;let l;for(const o of n){let n=me(o);if(!n)continue;i.add(n);const a=(null===(e=null==t?void 0:t.slides)||void 0===e?void 0:e.indexOf(o))>-1;a&&s.add(n);const c=o.pos?Math.round(1e4*o.pos)/1e4:0,d=z?0:$?-1*c:c,u=z?c:0,f=r(d,0,o.dim,0,100),p=r(u,0,o.dim,0,100),v=O.setTransform||void 0;if(v instanceof Function?v(Oe,o,{x:d,y:u,xPercent:f,yPercent:p}):n.style.transform=d||u?`translate3d(${f}%, ${p}%,0)`:"",W("adaptiveHeight")&&a){const e=(n.firstElementChild||n).getBoundingClientRect().height;l=null==l?e:Math.max(l,e)}}[...o(C,`.${O.classes.slide}`)].forEach((e=>{const t=parseInt(e.getAttribute("index")||"-1"),n=G[t];n||e.remove(),u(e,O.classes.isSelected,s.has(e)),Y.has(t)||i.has(e)||ge(n)})),C&&l&&(C.style.height=`${l}px`),J=[...n],te("render",n)}function Te(){var e;null==A||A.removeEventListener("click",Me),we(),document.removeEventListener("mousemove",ie),null==S||S.disconnect(),S=void 0;for(const e of Object.values(R))null==e||e.destroy();R={};for(const n of G)n.el&&t(n.el)&&(n.state=void 0,xe(n),Se(n),ge(n),n.isVirtual?(null===(e=n.el)||void 0===e||e.remove(),n.el=void 0):(n.el.style.transform="",null==C||C.appendChild(n.el)));null==M||M.destroy(),M=void 0,null==x||x.destroy(),x=void 0;for(const e of Object.values(O.classes||{}))d(A,e);d(C,"is-draggable")}const Oe={add:function(e,t){const n=fe(e,t);for(const e of n)te("addSlide",e);return oe(_),be(),Le(),Oe},canGoPrev:function(){return V||I>0},canGoNext:function(){return V||I<K.length-1},destroy:function(){return te("destroy"),window.removeEventListener("resize",ne),Te(),ee.clear(),A=null,K=[],G=[],O=Object.assign({},g),R={},X=[],P="",_="*",L=2,Oe},emit:te,filter:function(e="*"){return oe(e),be(),Le(),te("filter",e),Oe},getContainer:function(){return A},getGapDim:ce,getGestures:function(){return M},getLastMouseMove:function(){return h},getOptions:function(){return O},getPage:function(){return K[I]},getPageIndex:function(e){if(void 0!==e){for(const t of K||[])for(const n of t.slides)if(n.index===e)return t.index;return-1}return I},getPageProgress:function(e,t){void 0===e&&(e=I);const n=K[e];if(!n)return e>I?-1:1;let i=n.pos;const o=ce(),s=Oe.getPosition(),r=ue();if(V&&!0!==t){const e=i+r*Math.floor((s-K[0].pos)/r);i=[e+r,e,e-r].reduce((function(e,t){return Math.abs(t-s)<Math.abs(e-s)?t:e}))}return(s-i)/(n.dim+o)},getPageVisibility:function(e){void 0===e&&(e=I);const t=K[e];if(!t)return e>I?-1:1;const n=Oe.getPosition(),i=de();let o=t.pos;if(V){const e=Oe.getPosition(),t=ue(),n=o+Math.floor((e-K[0].pos)/t)*t;o=[n+t,n,n-t].reduce((function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t}))}return o>n&&o+t.dim<n+i?1:o<n?(o+t.dim-n)/t.dim:o+t.dim>n+i?(n+i-o)/t.dim:0},getPages:function(){return K},getPlugins:function(){return R},getPosition:function(e){var t;let n=F;if(V&&!0!==e){const e=ue();n-=Math.floor((F-(null===(t=K[0])||void 0===t?void 0:t.pos)||0)/e)*e}return n},getSlides:function(){return G},getState:function(){return L},getTotalSlideDim:ue,getTween:function(){return x},getViewport:function(){return C},getViewportDim:de,goTo:Pe,hasNavigated:function(){return void 0!==j},hideError:Se,hideLoading:xe,init:function(){if(!v||!t(v))throw new Error("No Element found");return 0!==L&&(Te(),L=0),A=v,T=w,window.removeEventListener("resize",ne),T.breakpoints&&window.addEventListener("resize",ne),ne(),Oe},isInfinite:function(){return V},isInTransition:function(){return Y.size>0},isRTL:function(){return $},isSettled:function(){return q},localize:function(e,t=[]){return Z(e,t)},next:function(e={}){return Pe(I+1,e),Oe},off:function(e,t){for(const n of e instanceof Array?e:[e])ee.has(n)&&ee.set(n,ee.get(n).filter((e=>e!==t)));return Oe},on:function(e,t){for(const n of e instanceof Array?e:[e])ee.set(n,[...ee.get(n)||[],t]);return Oe},prev:function(e={}){return Pe(I-1,e),Oe},remove:function(e){void 0===e&&(e=G.length-1);const t=G[e];return t&&(te("removeSlide",t),t.el&&(Ee(t.el),t.el.remove(),t.el=void 0),G.splice(e,1),oe(_),be(),Le()),Oe},setPosition:function(e){F=e,se(),Le()},showError:function(e,t){xe(e),Se(e);const n=e.el;if(n){const i=document.createElement("div");c(i,"f-html"),c(i,"is-error"),i.innerHTML=Z(t||"<p>{{ERROR}}</p>"),e.htmlEl=i,c(n,"has-html"),c(n,"has-error"),n.insertAdjacentElement("afterbegin",i),te("contentReady",e)}return Oe},showLoading:function(e){const t=e.el,n=null==t?void 0:t.querySelector(".f-spinner");if(!t||n)return Oe;const i=W("spinnerTpl"),o=l(i);return o&&(c(o,"f-spinner"),c(t,"is-loading"),t.insertAdjacentElement("beforeend",o)),Oe},version:"6.0.9"};return Oe};E.l10n={en_EN:v},E.getDefaults=()=>g;export{E as Carousel};
