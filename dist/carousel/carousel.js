/*! License details at fancyapps.com/license */
import{isPlainObject as e}from"../utils/isPlainObject.js";import{isNode as t}from"../utils/isNode.js";import{isString as n}from"../utils/isString.js";import{getScrollableParent as i}from"../utils/getScrollableParent.js";import{getDirectChildren as o}from"../utils/getDirectChildren.js";import{extend as s}from"../utils/extend.js";import{map as r}from"../utils/map.js";import{stringToHtml as l}from"../utils/strToHtml.js";import{clamp as a}from"../utils/clamp.js";import{addClass as c}from"../utils/addClass.js";import{removeClass as d}from"../utils/removeClass.js";import{toggleClass as u}from"../utils/toggleClass.js";import{Tween as f}from"../libs/tween.js";import{Gestures as p}from"../libs/gestures.js";import{en_EN as v}from"./l10n/en_EN.js";const g=e=>{e.cancelable&&e.preventDefault()},m={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:v,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:200,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let h,b=0;const E=(v,x={},y={})=>{b++;let w,M,S,j,P,L=0,T=Object.assign({},m),O=Object.assign({},m),R={},A=null,C=null,V=!1,H=!1,D=!1,$=!1,z="height",F=0,q=!0,I=0,k=0,B=0,N=0,_="*",G=[],X=[];const Y=new Set;let J=[],K=[],Q=0,U=0;function W(e,...t){let n=O[e];return n&&n instanceof Function?n(Ae,...t):n}function Z(e,t=[]){const n=W("l10n")||{};e=String(e).replace(/\{\{(\w+)\}\}/g,((e,t)=>n[t]||e));for(let n=0;n<t.length;n++)e=e.split(t[n][0]).join(t[n][1]);return e=e.replace(/\{\{(.*?)\}\}/g,((e,t)=>t))}const ee=new Map;function te(e,...t){const n=ee.get(e)||[];O.on&&n.push(O.on[e]);for(const e of n)e&&e instanceof Function&&e(Ae,...t);"*"!==e&&te("*",e,...t)}function ne(){var t,n;const i=s({},m,T);s(i,m,T);let r="";const l=T.breakpoints||{};if(l)for(const[e,t]of Object.entries(l))window.matchMedia(e).matches&&(r+=e,s(i,t));if(void 0===P||r!==P){if(P=r,0!==L){let e=null===(n=null===(t=K[I])||void 0===t?void 0:t.slides[0])||void 0===n?void 0:n.index;void 0===e&&(e=O.initialSlide),i.initialSlide=e,i.slides=[];for(const e of G)e.isVirtual&&i.slides.push(e)}Re(),O=i,!1!==O.enabled&&(L=0,te("init"),function(){for(const[e,t]of Object.entries(Object.assign(Object.assign({},y),O.plugins||{})))if(e&&!R[e]&&t instanceof Function){const n=t();n.init(Ae,E),R[e]=n}te("initPlugins")}(),function(){if(!A)return;const t=W("classes")||{};c(A,t.container),c(A,t.isEnabled);const n=W("style");if(n&&e(n))for(const[e,t]of Object.entries(n))A.style.setProperty(e,t);C=A.querySelector(`.${t.viewport}`),C||(C=document.createElement("div"),c(C,t.viewport),C.append(...o(A,`.${t.slide}`)),A.insertAdjacentElement("afterbegin",C)),A.carousel=Ae,te("initLayout")}(),function(){if(!C)return;const e=W("classes")||{};G=[],[...o(C,`.${e.slide}`)].forEach((e=>{e.parentElement&&(G.push(ge(Object.assign({el:e,isVirtual:!1},e.dataset||{}))),e.parentElement.removeChild(e))})),ve(W("slides"));for(const e of G)te("addSlide",e);te("initSlides")}(),M=f().on("start",(()=>{w&&w.isPointerDown()||(re(),Oe())})).on("step",(e=>{const t=F;F=e.pos,F!==t&&(q=!1,Oe())})).on("end",(e=>{(null==w?void 0:w.isPointerDown())||(F=e.pos,M&&!H&&(F<B||F>N)?M.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:a(B,F,N)}).start():q||(q=!0,te("settle")))})),xe(),function(){if(A&&(A.addEventListener("click",Se,{passive:!1}),document.addEventListener("mousemove",ie),!S)){let e=null;S=new ResizeObserver((t=>{e||(e=requestAnimationFrame((()=>{!function(e){if(!A)return;if(0===L){const t=e[0].contentBoxSize[0],n=t.blockSize,i=t.inlineSize;return Q=n,U=i,L=1,oe(),Oe(),le(),void te("ready")}if(1!==L)return;const t=K.length;xe(),oe();const n=A.getBoundingClientRect(),i=n.height,o=n.width;t>1&&($&&Math.abs(i-Q)<.5||!$&&Math.abs(o-U)<.5)||(Q=i,U=o,$&&!i||!$&&!o||A&&C&&(t===K.length&&(null==w?void 0:w.isPointerDown())||(W("dragFree")&&(H||F>B&&F<N)?(re(),Oe()):Te(I,{transition:!1}))))}(t),e=null})))})),S.observe(A)}}())}}function ie(e){h=e}function oe(){if(!C)return;const e=W("gestures");e&&w||(e?w=p(C,e).on("start",(e=>{var t,n;if(!M)return;const{srcEvent:o}=e;$&&i(o.target),M.pause(),M.getCurrentVelocities().pos=0;const s=null===(t=K[I])||void 0===t?void 0:t.slides[0];if(s&&Y.has(s.index)&&s.el&&(F=s.offset||0,F+=(function(e){const t=window.getComputedStyle(e),n=new DOMMatrixReadOnly(t.transform);return{width:n.m41||0,height:n.m42||0}}(s.el)[z]||0)*(D&&!$?1:-1)),we(),!H){(F<B||F>N)&&M.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:(null===(n=M.getCurrentVelocities())||void 0===n?void 0:n.pos)||0,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:a(B,F,N)}).start()}})).on("move",(e=>{const{srcEvent:t,axis:n}=e,o=e.srcEvent.target;o&&i(o)||(n||(t.stopPropagation(),t.stopImmediatePropagation()),("y"===n&&$||"x"===n&&!$)&&(g(t),t.stopPropagation()))})).on("panstart",(e=>{(null==e?void 0:e.axis)===($?"y":"x")&&c(C,"is-dragging")})).on("panend",(()=>{d(C,"is-dragging")})).on("pan",(e=>{var t;const{deltaX:n,deltaY:i,currentTouch:o,axis:s}=e;if(!M)return;if(o.length>1)return;if("y"===s&&!$||"x"===s&&$)return;const r=D&&!$?1:-1;let l=$?i:n,a=(null==M?void 0:M.isRunning())?M.getEndValues().pos:F,c=1;H||(a<=B&&l*r<0?(c=Math.max(.01,1-Math.abs(1/ue()*Math.abs(a-B))),c*=.2):a>=N&&l*r>0&&(c=Math.max(.01,1-Math.abs(1/ue()*Math.abs(a-N))),c*=.2)),a+=l*c*r,M.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:(null===(t=M.getCurrentVelocities())||void 0===t?void 0:t.pos)||0,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:a}).start()})).on("end",(e=>{var t,n;const{axis:i,velocityX:o,velocityY:s,currentTouch:r}=e,l=K.length,c=W("dragFree");if(r.length>0||!M)return;if(!l)return;const d=W("vertical")?s:o;let u=(null==M?void 0:M.isRunning())?M.getEndValues().pos:F;const f=D&&!$?1:-1;if(u+=d*(c?5:1)*f,!H&&(d*f<=0&&u<B||d*f>=0&&u>N)){let e=0;return Math.abs(d)>0&&(e=2*Math.abs(d),e=Math.min(.3*ue(),e)),u=a(B+-1*e,u,N+e),void M.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*d,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:u}).start()}if(c||(null===(t=R.Autoscroll)||void 0===t?void 0:t.isEnabled()))return void(Math.abs(d)>10?M.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*d,restDelta:1,restSpeed:1}).from({pos:F}).to({pos:u}).start():M.isRunning()||q||(q=!0,te("settle")));if(!c&&!(null===(n=R.Autoscroll)||void 0===n?void 0:n.isEnabled())&&(!e.offsetX&&!e.offsetY||"y"===i&&!$||"x"===i&&$))return void Te(I,{transition:"tween"});let p=ce(u);Math.abs(d)>10&&p===I&&(p+=d>0?D&&!$?1:-1:D&&!$?-1:1),Te(p,{transition:"tween",tween:{tension:160,friction:25,velocity:-1*d}})})).init():w&&(w.destroy(),w=void 0))}function se(e="*"){var t;const n=[];for(const i of G)("*"===e||i.class&&i.class.includes(e)||i.el&&(null===(t=i.el)||void 0===t?void 0:t.classList.contains(e)))&&n.push(i);j=void 0,_=e,X=[...n]}function re(){if(!M)return;const e=ce((null==M?void 0:M.isRunning())?M.getEndValues().pos:F);e!==I&&(j=I,I=e,Le(),le(),ae(),te("change",I,j))}function le(){var e;if(!A)return;u(C,"is-draggable",!!w&&K.length>0);for(const e of A.querySelectorAll("[data-carousel-index]"))e.innerHTML=I+"";for(const e of A.querySelectorAll("[data-carousel-page]"))e.innerHTML=I+1+"";for(const e of A.querySelectorAll("[data-carousel-pages]"))e.innerHTML=K.length+"";let t=!1;const n=null===(e=K[I])||void 0===e?void 0:e.slides[0];n&&(n.downloadSrc||"image"===n.type&&n.src)&&(t=!0);for(const e of A.querySelectorAll("[data-carousel-download]"))e.toggleAttribute("aria-disabled",!t)}function ae(e){var t;if(!A)return;e||(e=null===(t=K[I])||void 0===t?void 0:t.slides[0]);const n=e.el;if(n)for(const t of n.querySelectorAll("[data-slide-index]"))t.innerHTML=e.index+1+""}function ce(e){if(!K.length||!M)return 0;const t=fe();let n=e;H?n-=Math.floor((e-K[0].pos)/t)*t:n=a(K[0].pos,e,K[K.length-1].pos);const i=new Map;let o=0;for(const e of K){const s=Math.abs(e.pos-n),r=Math.abs(e.pos-n-t),l=Math.abs(e.pos-n+t),a=Math.min(s,r,l);i.set(o,a),o++}const s=i.size>0?[...i.entries()].reduce(((e,t)=>t[1]<e[1]?t:e)):[I,0];return parseInt(s[0])}function de(){return C&&parseFloat(getComputedStyle(C).getPropertyValue("--f-carousel-gap"))||0}function ue(){return C&&C.getBoundingClientRect()[z]||0}function fe(e=!0){const t=de();return X.reduce(((e,t)=>e+t.dim),0)+(X.length-(H&&e?0:1))*t}function pe(e){const t=de(),n=fe();let i=ue();if(!C)return[];const o=[];if(!n||!i)return[];e=void 0===e?F:e,H&&(e-=Math.floor(e/n)*n);let s=0,r=0;if(V){const e=C.getBoundingClientRect();s=e.left,r=e.right-e.width}let l=0;for(let a of X){const c=(t=0)=>{o.indexOf(a)>-1||(a.pos=l-e+t||0,a.offset+t>e-a.dim-s+.51&&a.offset+t<e+i+r-.51&&o.push(a))};if(a.offset=l,H)for(let e=-1;e<=1;e++)c(n*e);else c();l+=a.dim+t}return o}function ve(e,t){const n=[];for(const t of Array.isArray(e)?e:[e]){const e=ge(Object.assign(Object.assign({},t),{isVirtual:!0}));n.push(e)}G.splice(void 0===t?G.length:t,0,...n),Ee();for(const e of n)me(e);return se(_),n}function ge(e){return(n(e)||e instanceof HTMLElement)&&(e={html:e}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},e)}function me(e){if(!e)return;let t=e.el;t||(t=document.createElement("div"),e.el=t);const n=e.html?e.html instanceof HTMLElement?e.html:l(e.html):void 0;n&&(c(n,"f-html"),e.htmlEl=n,c(t,"has-html"),t.append(n),te("contentReady",e))}function he(e){if(!C||!e)return;let t=e.el;if(t){if(t.setAttribute("index",e.index+""),t.parentElement!==C){let n;c(t,O.classes.slide),c(t,e.class),Le(e);for(const t of G)if(t.index>e.index){n=t.el;break}C.insertBefore(t,n&&C.contains(n)?n:null),te("attachSlideEl",e)}return t}}function be(e){const t=null==e?void 0:e.el;t&&(t.remove(),ye(t),te("detachSlideEl",e))}function Ee(){for(let e=0;e<G.length;e++){const t=G[e],n=t.el;n&&(t.index!==e&&ye(n),n.setAttribute("index",`${e}`)),t.index=e}}function xe(){var e,n,i;if(!A||!C)return;D=W("rtl"),$=W("vertical"),z=$?"height":"width";const o=W("classes");u(A,o.isLTR,!D),u(A,o.isRTL,D),u(A,o.isHorizontal,!$),u(A,o.isVertical,$),u(A,o.hasAdaptiveHeight,W("adaptiveHeight")),V="visible"===window.getComputedStyle(C).getPropertyValue("overflow-"+($?"y":"x"));const s=C.getBoundingClientRect();if(!s.width&&!s.height)return;const r=function(){let e=0;if(C){let t=document.createElement("div");c(t,O.classes.slide),C.appendChild(t),e=t.getBoundingClientRect()[z],t.remove(),t=void 0}return e}();for(const n of X){const i=n.el;let o=0;if(!n.isVirtual&&i&&t(i)){let t=!1;i.parentElement&&i.parentElement===C||(C.appendChild(i),t=!0),o=i.getBoundingClientRect()[z],t&&(null===(e=i.parentElement)||void 0===e||e.removeChild(i))}else o=r;n.dim=o}if(H=!1,W("infinite")){H=!0;const e=fe(),t=de();let n=ue();if(V){const e=C.getBoundingClientRect();n+=e.left,n+=e.right-e.width}for(let i=0;i<X.length;i++){const o=X[i].dim+t;if(e-o<n&&e-o-n<o){H=!1;break}}}if(function(){if(!A)return;Ee();const e=ue(),t=de(),n=fe(!1);let i=W("slidesPerPage");i="auto"===i?1/0:parseFloat(i+""),K=[];let o=0,s=0;for(const n of X)(!K.length||o+n.dim-e>.05||s>=i)&&(K.push({index:K.length,slides:[],dim:0,offset:0,pos:0}),o=0,s=0),K[K.length-1].slides.push(n),o+=n.dim+t,s++;const r=W("center"),l=W("fill");let c=0;for(const i of K){i.dim=(i.slides.length-1)*t;for(const e of i.slides)i.dim+=e.dim;i.offset=c,i.pos=c,!1!==r&&(i.pos-=.5*(e-i.dim)),l&&!H&&n>e&&(i.pos=a(0,i.pos,n-e)),c+=i.dim+t}const d=[];let u;for(const e of K){const t=Object.assign({},e);u&&t.pos===u.pos?(u.dim+=t.dim,u.slides=[...u.slides,...t.slides]):(u=t,t.index=d.length,d.push(t))}K=d,le()}(),B=(null===(n=K[0])||void 0===n?void 0:n.pos)||0,N=(null===(i=K[K.length-1])||void 0===i?void 0:i.pos)||0,0===L)!function(){var e;j=void 0,I=W("initialPage");const t=W("initialSlide")||void 0;void 0!==t&&(I=Ae.getPageIndex(t)||0),I=a(0,I,K.length-1),F=(null===(e=K[I])||void 0===e?void 0:e.pos)||0,k=F}();else{const e=(null==M?void 0:M.isRunning())?M.getEndValues().pos:F;(e<B||e>N)&&(I=a(0,I,K.length-1),k=K[I||0].pos||0)}te("refresh")}function ye(e){if(!e||!t(e))return;const n=parseInt(e.getAttribute("index")||"-1");let i="";for(const t of Array.from(e.classList)){const e=t.match(/^f-(\w+)(Out|In)$/);e&&e[1]&&(i=e[1]+"")}if(!e||!i)return;const o=[`f-${i}Out`,`f-${i}In`,"to-prev","to-next","from-prev","from-next"];e.removeEventListener("animationend",Me),d(e,o.join(" ")),Y.delete(n)}function we(){if(!C)return;const e=Y.size;for(const e of X)ye(e.el);Y.clear(),e&&Oe()}function Me(e){"f-"===e.animationName.substring(0,2)&&(ye(e.target),Y.size||(d(A,"in-transition"),!q&&Math.abs(Ae.getPosition(!0)-k)<.5&&(q=!0,te("settle"))),Oe())}function Se(e){if(e.defaultPrevented)return;const t=e.composedPath()[0];if(t.closest("[data-carousel-go-prev]"))return g(e),void Ae.prev();if(t.closest("[data-carousel-go-next]"))return g(e),void Ae.next();const n=t.closest("[data-carousel-go-to]");if(n)return g(e),void Ae.goTo(parseFloat(n.dataset.carouselGoTo||"")||0);if(t.closest("[data-carousel-download]")){g(e);const t=K[I].slides[0];if(t.downloadSrc||"image"===t.type&&t.src){const e=t.downloadFilename,n=document.createElement("a"),i=t.downloadSrc||t.src||"";n.href=i,n.target="_blank",n.download=e||i,n.click()}}else te("click",e)}function je(e){var t;const n=e.el;n&&(null===(t=n.querySelector(".f-spinner"))||void 0===t||t.remove(),d(n,"is-loading"))}function Pe(e){var t;const n=e.el;n&&(null===(t=n.querySelector(".f-html.is-error"))||void 0===t||t.remove(),d(n,"has-error"))}function Le(e){var t;e||(e=null===(t=K[I])||void 0===t?void 0:t.slides[0]);const i=null==e?void 0:e.el;if(!i)return;let o=W("formatCaption",e);void 0===o&&(o=e.caption),o=o||"";const s=W("captionEl");if(s&&s instanceof HTMLElement){if(e.index!==I)return;if(n(o)&&(s.innerHTML=Z(o+"")),o instanceof HTMLElement){if(o.parentElement===s)return;s.innerHTML="",o.parentElement&&(o=o.cloneNode(!0)),s.append(o)}return}if(!o)return;let r=e.captionEl||i.querySelector(".f-caption");!r&&o instanceof HTMLElement&&o.classList.contains("f-caption")&&(r=o),r||(r=document.createElement("div"),c(r,"f-caption"),n(o)?r.innerHTML=Z(o+""):o instanceof HTMLElement&&(o.parentElement&&(o=o.cloneNode(!0)),r.append(o)));const l=`f-caption-${b}_${e.index}`;r.setAttribute("id",l),r.dataset.selectable="true",c(i,"has-caption"),i.setAttribute("aria-labelledby",l),e.captionEl=r,i.insertAdjacentElement("beforeend",r)}function Te(t,i){let{transition:o,tween:s}=Object.assign({transition:O.transition,tween:O.tween},i||{});if(!A||!M)return;const r=K.length;if(!r)return;if(function(e,t){var i,o,s,r;if(!(A&&M&&t&&n(t)&&"tween"!==t))return!1;if((null===(i=K[I])||void 0===i?void 0:i.slides.length)>1)return!1;const l=K.length;let u=e>I?1:-1;e=H?(e%l+l)%l:a(0,e,l-1),D&&(u*=-1);const f=null===(o=K[I])||void 0===o?void 0:o.slides[0],p=null==f?void 0:f.index,v=null===(s=K[e])||void 0===s?void 0:s.slides[0],g=null==v?void 0:v.index,m=null===(r=K[e])||void 0===r?void 0:r.pos;if(void 0===g||void 0===p||p===g||F===m||Math.abs(ue()-((null==v?void 0:v.dim)||0))>1)return!1;q=!1,M.pause(),we(),c(A,"in-transition"),F=k=m;const h=he(f),b=he(v);return re(),h&&(Y.add(p),h.style.transform="",h.addEventListener("animationend",Me),d(h,O.classes.isSelected),c(h,`f-${t}Out to-${u>0?"next":"prev"}`)),b&&(Y.add(g),b.style.transform="",b.addEventListener("animationend",Me),c(b,O.classes.isSelected),c(b,`f-${t}In from-${u>0?"prev":"next"}`)),Oe(),!0}(t,o))return;t=H?(t%r+r)%r:a(0,t,r-1),k=K[t||0].pos||0;const l=M.isRunning()?M.getEndValues().pos:F;if(Math.abs(k-l)<1)return F=k,I!==t&&(Le(),le(),ae(),j=I,I=t,te("change",I,j)),Oe(),void(q||(q=!0,te("settle")));if(M.pause(),we(),H){const e=fe(),t=Math.floor((l-K[0].pos)/e),n=k+t*e;k=[n+e,n,n-e].reduce((function(e,t){return Math.abs(t-l)<Math.abs(e-l)?t:e}))}!1!==o&&e(s)?M.spring(s).from({pos:F}).to({pos:k}).start():(F=k,re(),Oe(),q||(q=!0,te("settle")))}function Oe(){var e;if(!A||!C)return;const t=K[I];J=pe();const n=new Set;let i;const s=[];for(const o of X){if(o.isVirtual&&!Y.has(o.index)&&J.indexOf(o)<0)continue;let l=he(o);if(!l)continue;s.push(o);const a=(null===(e=null==t?void 0:t.slides)||void 0===e?void 0:e.indexOf(o))>-1;if(a&&n.add(l),!Y.has(o.index)){const e=o.pos?Math.round(1e4*o.pos)/1e4:0,t=$?0:D?-1*e:e,n=$?e:0,i=r(t,0,o.dim,0,100),s=r(n,0,o.dim,0,100),a=O.setTransform||void 0;a instanceof Function?a(Ae,o,{x:t,y:n,xPercent:i,yPercent:s}):l.style.transform=t||n?`translate3d(${i}%, ${s}%,0)`:""}if(W("adaptiveHeight")&&a){const e=(l.firstElementChild||l).getBoundingClientRect().height;i=null==i?e:Math.max(i,e)}}[...o(C,`.${O.classes.slide}`)].forEach((e=>{const t=parseInt(e.getAttribute("index")||"-1"),i=G[t];i||e.remove(),u(e,O.classes.isSelected,n.has(e)),i.isVirtual&&!Y.has(i.index)&&J.indexOf(i)<0&&be(i)})),C&&i&&(C.style.height=`${i}px`),te("render",s)}function Re(){var e;null==A||A.removeEventListener("click",Se),we(),document.removeEventListener("mousemove",ie),null==S||S.disconnect(),S=void 0;for(const n of G)n.el&&t(n.el)&&(n.state=void 0,je(n),Pe(n),be(n),n.isVirtual?(null===(e=n.el)||void 0===e||e.remove(),n.el=void 0):(n.el.style.transform="",null==C||C.appendChild(n.el)));for(const e of Object.values(R))null==e||e.destroy();R={},null==w||w.destroy(),w=void 0,null==M||M.destroy(),M=void 0;for(const[e,t]of Object.entries(O.classes||{}))"container"!==e&&d(A,t);d(C,"is-draggable")}const Ae={add:function(e,t){let n=F;const i=I,o=fe(),s=(null==M?void 0:M.isRunning())?M.getEndValues().pos:F,r=Math.floor((s-K[0].pos)/o),l=ve(e,t);for(const e of l)te("addSlide",e);return se(_),xe(),M&&(i===I&&(n-=r*o),k=K[I||0].pos||0,M.spring({clamp:!0,mass:1,tension:300,friction:25,restDelta:1,restSpeed:1}).from({pos:n}).to({pos:k}).start()),Oe(),Ae},canGoPrev:function(){return H||I>0},canGoNext:function(){return H||I<K.length-1},destroy:function(){return te("destroy"),window.removeEventListener("resize",ne),Re(),ee.clear(),A=null,K=[],G=[],O=Object.assign({},m),R={},X=[],P="",_="*",L=2,Ae},emit:te,filter:function(e="*"){return se(e),xe(),Oe(),te("filter",e),Ae},getContainer:function(){return A},getGapDim:de,getGestures:function(){return w},getLastMouseMove:function(){return h},getOption:function(e){return W(e)},getOptions:function(){return O},getPage:function(){return K[I]},getPageIndex:function(e){if(void 0!==e){for(const t of K||[])for(const n of t.slides)if(n.index===e)return t.index;return-1}return I},getPageProgress:function(e,t){void 0===e&&(e=I);const n=K[e];if(!n)return e>I?-1:1;const i=fe(),o=de();let s=n.pos,r=Ae.getPosition();if(H&&!0!==t){const e=Math.floor((r-K[0].pos)/i);r-=e*i,s=[s+i,s,s-i].reduce((function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e}))}return(r-s)/(n.dim+o)},getPageVisibility:function(e){void 0===e&&(e=I);const t=K[e];if(!t)return e>I?-1:1;const n=Ae.getPosition(),i=ue();let o=t.pos;if(H){const e=Ae.getPosition(),t=fe(),n=o+Math.floor((e-K[0].pos)/t)*t;o=[n+t,n,n-t].reduce((function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t}))}return o>n&&o+t.dim<n+i?1:o<n?(o+t.dim-n)/t.dim:o+t.dim>n+i?(n+i-o)/t.dim:0},getPages:function(){return K},getPlugins:function(){return R},getPosition:function(e){var t;let n=F;if(H&&!0!==e){const e=fe();n-=Math.floor((F-(null===(t=K[0])||void 0===t?void 0:t.pos)||0)/e)*e}return n},getSlides:function(){return G},getState:function(){return L},getTotalSlideDim:fe,getTween:function(){return M},getViewport:function(){return C},getViewportDim:ue,getVisibleSlides:function(e){return void 0===e?J:pe(e)},goTo:Te,hasNavigated:function(){return void 0!==j},hideError:Pe,hideLoading:je,init:function(){if(!v||!t(v))throw new Error("No Element found");return 0!==L&&(Re(),L=0),A=v,T=x,window.removeEventListener("resize",ne),T.breakpoints&&window.addEventListener("resize",ne),ne(),Ae},isInfinite:function(){return H},isInTransition:function(){return Y.size>0},isRTL:function(){return D},isSettled:function(){return q},isVertical:function(){return $},localize:function(e,t=[]){return Z(e,t)},next:function(e={}){return Te(I+1,e),Ae},off:function(e,t){for(const n of e instanceof Array?e:[e])ee.has(n)&&ee.set(n,ee.get(n).filter((e=>e!==t)));return Ae},on:function(e,t){for(const n of e instanceof Array?e:[e])ee.set(n,[...ee.get(n)||[],t]);return Ae},prev:function(e={}){return Te(I-1,e),Ae},remove:function(e){void 0===e&&(e=G.length-1);const t=G[e];return t&&(te("removeSlide",t),t.el&&(ye(t.el),t.el.remove(),t.el=void 0),G.splice(e,1),se(_),xe(),Oe()),Ae},setPosition:function(e){F=e,re(),Oe()},showError:function(e,t){je(e),Pe(e);const n=e.el;if(n){const i=document.createElement("div");c(i,"f-html"),c(i,"is-error"),i.innerHTML=Z(t||"<p>{{ERROR}}</p>"),e.htmlEl=i,c(n,"has-html"),c(n,"has-error"),n.insertAdjacentElement("afterbegin",i),te("contentReady",e)}return Ae},showLoading:function(e){const t=e.el,n=null==t?void 0:t.querySelector(".f-spinner");if(!t||n)return Ae;const i=W("spinnerTpl"),o=l(i);return o&&(c(o,"f-spinner"),c(t,"is-loading"),t.insertAdjacentElement("beforeend",o)),Ae},version:"6.0.20"};return Ae};E.l10n={en_EN:v},E.getDefaults=()=>m;export{E as Carousel};
