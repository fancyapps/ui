/*! License details at fancyapps.com/license */
import{isPlainObject as t}from"../utils/isPlainObject.js";import{isString as e}from"../utils/isString.js";import{stringToHtml as o}from"../utils/strToHtml.js";import{PanzoomButtons as n}from"../shared/buttons.js";var l;!function(t){t.Left="left",t.middle="middle",t.right="right"}(l||(l={}));const i=Object.assign({counter:{tpl:'<div class="f-carousel__counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'}},n),s={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto"},a=()=>{let l,a;function u(){const e=null==l?void 0:l.getOptions().Toolbar;return t(e)?Object.assign(Object.assign({},s),e):s}function d(){var t,s,d;if(!(null==l?void 0:l.getOptions().Toolbar))return;if(!l||a)return;let c=u().enabled;if(!c)return;let r=u().absolute;const f=l.getSlides().length>1;let g=!1,p=!1;for(const t of l.getSlides())t.panzoomRef&&(g=!0),(t.downloadSrc||"image"===t.type&&t.src)&&(p=!0);let b=(null===(t=l.getPlugins().Thumbs)||void 0===t?void 0:t.isEnabled())||!1,v=f&&l.getPlugins().Autoplay||!1,m=l.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if("auto"===c&&(c=g),!c)return;a=document.createElement("div"),a.classList.add("f-carousel__toolbar");const h=u().display;for(const t of["left","middle","right"]){const s=h[t]||[],u=document.createElement("div");u.classList.add("f-carousel__toolbar__column"),u.classList.add(`is-${t}`);for(const t of s){let s;if(e(t)){if("counter"===t&&!f)continue;if("autoplay"===t&&!v)continue;if(n[t]&&!g)continue;if("fullscreen"===t&&!m)continue;if("thumbs"===t&&!b)continue;if("download"===t&&!p)continue;s=i[t]}if("object"==typeof t&&(s=t),s&&s.tpl){let t=l.localize(s.tpl);t=t.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">');const e=o(t);e&&("function"==typeof s.click&&l&&e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof s.click&&l&&s.click(l,t)})),u.append(e))}}a.append(u)}a.childElementCount&&(!0===r&&a.classList.add("is-absolute"),null===(s=l.getContainer())||void 0===s||s.classList.add("has-toolbar"),null===(d=l.getViewport())||void 0===d||d.insertAdjacentElement("beforebegin",a))}return{init:function(t){l=t,l.on("initSlides",d)},destroy:function(){var t;null==l||l.off("initSlides",d),null===(t=null==l?void 0:l.getContainer())||void 0===t||t.classList.remove("has-toolbar"),null==a||a.remove(),a=void 0},add:function(t,e){i[t]=e},isEnabled:function(){return!!a}}};export{a as Toolbar,l as ToolbarColumn};
