!/*! License details at fancyapps.com/license */function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(this,function(e){"use strict";let t,n=function(e){if(!(e&&e instanceof Element&&e.offsetParent))return!1;let t=e.scrollHeight>e.clientHeight,n=window.getComputedStyle(e).overflowY,i=-1!==n.indexOf("hidden"),o=-1!==n.indexOf("visible");return t&&!i&&!o},i=function(e,t){return!e||e===document.body||t&&e===t?null:n(e)?e:i(e.parentElement,t)},o=function(e){var t=new DOMParser().parseFromString(e,"text/html").body;if(t.childElementCount>1){for(var n=document.createElement("div");t.firstChild;)n.appendChild(t.firstChild);return n}let i=t.firstChild;if(i&&!(i instanceof HTMLElement)){var n=document.createElement("div");return n.appendChild(i),n}return i},a=function(e=0,t=0,n=0){return Math.max(Math.min(t,n),e)};function r(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function l(e,t){let n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every(n=>{let i=e[n],o=t[n];return"function"==typeof i?`${i}`==`${o}`:r(i)&&r(o)?l(i,o):i===o})}let s=1/60*3e3,c=function(e){for(let t of b)t.getState()===u.Running&&t.tick(w?e-w:0);w=e,x=window.requestAnimationFrame(c)},u=((f={})[f.Initializing=0]="Initializing",f[f.Running=1]="Running",f[f.Paused=2]="Paused",f[f.Completed=3]="Completed",f[f.Destroyed=4]="Destroyed",f);var f,d,h,g,m,p,v=((d=v||{})[d.Spring=0]="Spring",d[d.Ease=1]="Ease",d);let y=((h={})[h.Loop=0]="Loop",h[h.Reverse=1]="Reverse",h),b=new Set,x=null,w=0;function M(){let e=u.Initializing,t=v.Ease,n=0,i=0,o=M.Easings.Linear,r=500,f=0,d=0,h=0,g=0,m=1/0,p=.01,w=.01,E=!1,T={},L=null,R={},C={},k={},A=0,S=0,O=y.Loop,P=M.Easings.Linear,F=new Map;function I(e,...t){for(let n of F.get(e)||[])n(...t)}function D(e){return i=0,e?L=setTimeout(()=>{Z()},e):Z(),Y}function Z(){e=u.Running,I("start",R,C)}function z(){if(e=u.Completed,k={},I("end",R),e===u.Completed)if(n<A){if(n++,O===y.Reverse){let e={...T};T={...C},C=e}D(S)}else n=0;return Y}let Y={getState:function(){return e},easing:function(e){return o=e,t=v.Ease,k={},Y},duration:function(e){return r=e,Y},spring:function(e={}){t=v.Spring;let{velocity:n,mass:i,tension:o,friction:a,restDelta:r,restSpeed:l,maxSpeed:s,clamp:c}={velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0,...e};return f=n,d=i,h=o,g=a,w=r,p=l,m=s,E=c,k={},Y},isRunning:function(){return e===u.Running},isSpring:function(){return t===v.Spring},from:function(e){return R={...e},Y},to:function(e){return C=e,Y},repeat:function(e,t=0,n=y.Loop,i){return A=e,S=t,O=n,P=i||o,Y},on:function(e,t){return F.set(e,[...F.get(e)||[],t]),Y},off:function(e,t){return F.has(e)&&F.set(e,F.get(e).filter(e=>e!==t)),Y},start:function(t){return e=u.Initializing,l(T={...R},C)||(b.add(this),x||(x=window.requestAnimationFrame(c)),D(t)),Y},pause:function(){return L&&(clearTimeout(L),L=null),e===u.Running&&(e=u.Paused,I("pause",R)),Y},end:z,tick:function(n){n>s&&(n=s),i+=n;let c=0,b=!1;if(e!==u.Running)return Y;if(t===v.Ease){b=1===(c=a(0,i/r,1));let e=O===y.Reverse?P:o;for(let t in R)R[t]=T[t]+(C[t]-T[t])*e(c)}if(t===v.Spring){let e=.001*n,t=0;for(let n in R){let i=C[n],o=R[n];if(!("number"==typeof i&&!isNaN(i))||!("number"==typeof o&&!isNaN(o)))continue;if(Math.abs(i-o)<=w){R[n]=i,k[n]=0;continue}k[n]||("object"==typeof f&&"number"==typeof f[n]?k[n]=f[n]:"number"==typeof f?k[n]=f:k[n]=0);let r=k[n],l=(r=a(-1*Math.abs(m),r,Math.abs(m)))*d*g,s=Math.abs(i-o)*h;r+=((o>i?-1:1)*s-l)/d*e,o+=r*e;let c=R[n]>i?o<i:o>i,u=Math.abs(r)<p&&Math.abs(i-o)<=w;E&&c&&(u=!0),u?(o=i,r=0):t++,R[n]=o,k[n]=r}b=!t}let x={...C};return I("step",R,T,C,c),b&&e===u.Running&&l(C,x)&&(e=u.Completed,z()),Y},getStartValues:function(){return T},getCurrentValues:function(){return R},getCurrentVelocities:function(){return k},getEndValues:function(){return C},destroy:function(){e=u.Destroyed,L&&(clearTimeout(L),L=null),T=R=C={},b.delete(this)}};return Y}function E(e){let t=[];for(let n of"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?e.touches:e instanceof MouseEvent&&"mouseup"!==e.type?[e]:[])t.push({x:n.clientX,y:n.clientY,ts:Date.now()});return t}function T(e){let t=[];for(let n of"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?e.changedTouches:e instanceof MouseEvent?[e]:[])t.push({x:n.clientX,y:n.clientY,ts:Date.now()});return t}function L(e){let t=e[0],n=e[1]||t;return{x:(t.x+n.x)/2,y:(t.y+n.y)/2,ts:n.ts}}function R(e){let t=e[0],n=e[1]||e[0];return t&&n?-1*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)):0}M.destroy=()=>{for(let e of b)e.destroy();x&&(cancelAnimationFrame(x),x=null)},M.Easings={Linear:function(e){return e},EaseIn:function(e){return 0===e?0:Math.pow(2,10*e-10)},EaseOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},EaseInOut:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};let C=e=>{e.cancelable&&e.preventDefault()},k={passive:!1},A={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]},S=!1,O=!0,P=(e,t)=>{let n,i,o,a={...A,...t},r=[],l=[],s=[],c=!1,u=!1,f=!1,d=0,h=0,g=0,m=0,p=0,v=0,y=0,b=0,x=0,w=[],M=0,P=0,F=new Map;function I(e){let t=R(l),a=R(s),f=Math.abs(y)>Math.abs(b)?y:b,d={srcEvent:o,isPanRecognized:c,isSwipeRecognized:u,firstTouch:r,previousTouch:s,currentTouch:l,deltaX:g,deltaY:m,offsetX:p,offsetY:v,velocityX:y,velocityY:b,velocity:f,angle:x,axis:i,scale:t&&a?t/a:0,center:n};for(let t of F.get(e)||[])t(d)}function D(e){let t=Date.now();w=w.filter(e=>!e.ts||e.ts>t-100),e&&w.push(e)}function Z(){if(y=0,b=0,w.length>3){let e=w[0],t=w[w.length-1];if(e&&t){let n=t.x-e.x,i=t.y-e.y,o=e.ts&&t.ts?t.ts-e.ts:0;o>0&&(y=Math.abs(n)>3?n/(o/30):0,b=Math.abs(i)>3?i/(o/30):0)}}}function z(e){if(e instanceof MouseEvent){if(S)return}else S=!0;let t=e.composedPath()[0],i=a.ignore.join(",");if(t.matches(i)||t.closest(i)||"undefined"!=typeof MouseEvent&&e instanceof MouseEvent&&(!e.buttons||0!==e.button))return;e instanceof MouseEvent&&C(e);let g=Date.now(),m=g-(d||g);f=m>0&&m<=250,d=g,clearTimeout(M),o=e,e instanceof MouseEvent&&(window.addEventListener("mousemove",Y),window.addEventListener("mouseup",X)),window.addEventListener("blur",_),r=[...l=E(e)],s=[],h=l.length,n=L(l),1===h&&(c=!1,u=!1),h&&D(L(l)),I("start")}function Y(e){if(!r.length||e.defaultPrevented)return;o=e,s=[...l],h=(l=E(e)).length;let t=n=L(l),u=L(s);if(g=t.x-u.x,m=t.y-u.y,D(t),Z(),I("move"),l.length>1&&Math.abs(R(l)-R(s))>=.1&&I("pinch"),!c&&r.length){let e=L(r);p=t.x-e.x,v=t.y-e.y,(c=Math.abs(p)>a.panThreshold||Math.abs(v)>a.panThreshold)&&(O=!1,clearTimeout(P),P=0,i=(x=Math.abs(180*Math.atan2(v,p)/Math.PI))>45&&x<135?"y":"x",r=[...l],s=[...l],window.getSelection()?.removeAllRanges(),I("panstart"))}c&&(g||m)&&I("pan")}function X(e){if(o=e,!r.length)return;let t=E(e),i=T(e);if(h=t.length,n=L(i),i.length&&D(L(i)),Z(),s=[...l],l=[...t],r=[...t],t.length>0)I("end"),c=!1,u=!1,w=[];else{let e=a.swipeThreshold;(Math.abs(y)>e||Math.abs(b)>e)&&(u=!0),c&&I("panend"),u&&I("swipe"),c||u||(I("tap"),f?I("doubleTap"):M=setTimeout(function(){I("singleTap")},250)),I("end"),H()}}function _(){clearTimeout(M),H(),c&&I("panend"),I("end")}function H(){c=!1,u=!1,f=!1,h=0,w=[],l=[],s=[],r=[],g=0,m=0,p=0,v=0,y=0,b=0,x=0,i=void 0,window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",X),window.removeEventListener("blur",_),O||P||(P=setTimeout(()=>{O=!0,P=0},100))}function $(e){let t=e.target;S=!1,t&&!e.defaultPrevented&&(O||(C(e),e.stopPropagation()))}let j={init:function(){if(e)return e.addEventListener("click",$,k),e.addEventListener("mousedown",z,k),e.addEventListener("touchstart",z,k),e.addEventListener("touchmove",Y,k),e.addEventListener("touchend",X),e.addEventListener("touchcancel",X),j},on:function(e,t){return F.set(e,[...F.get(e)||[],t]),j},off:function(e,t){return F.has(e)&&F.set(e,F.get(e).filter(e=>e!==t)),j},isPointerDown:()=>h>0,destroy:function(){clearTimeout(M),clearTimeout(P),P=0,e&&(e.removeEventListener("click",$,k),e.removeEventListener("mousedown",z,k),e.removeEventListener("touchstart",z,k),e.removeEventListener("touchmove",Y,k),e.removeEventListener("touchend",X),e.removeEventListener("touchcancel",X)),e=null,H()}};return j};P.isClickAllowed=()=>O;let F={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset"},I=(e,t="")=>{e&&e.classList&&t.split(" ").forEach(t=>{t&&e.classList.add(t)})},D=(e,t="")=>{e&&e.classList&&t.split(" ").forEach(t=>{t&&e.classList.remove(t)})},Z=1e4,z=e=>{e.cancelable&&e.preventDefault()},Y=(e,t=Z)=>Math.round(((e=parseFloat(e+"")||0)+Number.EPSILON)*t)/t,X=((g={}).Reset="reset",g.Zoom="zoom",g.ZoomIn="zoomIn",g.ZoomOut="zoomOut",g.ZoomTo="zoomTo",g.ToggleCover="toggleCover",g.ToggleFull="toggleFull",g.ToggleMax="toggleMax",g.IterateZoom="iterateZoom",g.Pan="pan",g.Swipe="swipe",g.Move="move",g.MoveLeft="moveLeft",g.MoveRight="moveRight",g.MoveUp="moveUp",g.MoveDown="moveDown",g.RotateCCW="rotateCCW",g.RotateCW="rotateCW",g.FlipX="flipX",g.FlipY="flipY",g),_=((m={}).Cover="cover",m.Full="full",m.Max="max",m),H={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},$=((p={})[p.Init=0]="Init",p[p.Loading=1]="Loading",p[p.Error=2]="Error",p[p.Ready=3]="Ready",p[p.Destroyed=4]="Destroyed",p),j={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:X.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:F,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",protected:!1,singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:X.Zoom,width:"auto"},q=0,W=0,V=0,N=(e,n={},r={})=>{let l,s,c,u,f,d,h,g=$.Init,m={...j,...n},p={},v={...H},y={...H},b=[];function x(e){let t=m[e];return t&&"function"==typeof t?t(em):t}let w=new Map;function E(e,...t){let n=[...w.get(e)||[]];for(let i of(m.on&&n.push(m.on[e]),n))i&&i instanceof Function&&i(em,...t);"*"!==e&&E("*",e,...t)}function R(e){if(g!==$.Ready||i(e.target))return;let t=Date.now(),n=a(-1,[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),1);E("wheel",e,n);let o=x("wheelAction");if(!o||e.defaultPrevented)return;let r=y.scale,l=r*(n>0?1.5:.5);if(o===X.Zoom){let i=100>Math.abs(e.deltaY)&&100>Math.abs(e.deltaX);if(t-W<(i?200:45))return void z(e);W=t;let o=G(),s=ee();if(Y(l)<Y(o)&&Y(r)<=Y(o)?(V+=Math.abs(n),l=o):Y(l)>Y(s)&&Y(r)>=Y(s)?(V+=Math.abs(n),l=s):(V=0,l=a(o,l,s)),V>7)return}switch(z(e),o){case X.Pan:eo(o,{srcEvent:e,deltaX:-(2*e.deltaX),deltaY:-(2*e.deltaY)});break;case X.Zoom:eo(X.ZoomTo,{srcEvent:e,scale:l,center:{x:e.clientX,y:e.clientY}});break;default:eo(o,{srcEvent:e})}}function C(n){let i=n.composedPath()[0];if(!P.isClickAllowed()||!(i&&null!==i&&i instanceof Element&&"nodeType"in i)||n.defaultPrevented||!e?.contains(i)||i.hasAttribute("disabled")||i.hasAttribute("aria-disabled"))return;let o=i.closest("[data-panzoom-action]"),a=o?.dataset?.panzoomAction,r=o?.dataset?.panzoomValue||"";if(a){switch(a){case X.ZoomTo:case X.ZoomIn:case X.ZoomOut:eo(a,{scale:parseFloat(r||"")||void 0});break;case X.MoveLeft:case X.MoveRight:eo(a,{deltaX:parseFloat(r||"")||void 0});break;case X.MoveUp:case X.MoveDown:eo(a,{deltaY:parseFloat(r||"")||void 0});break;default:eo(a)}return}if(!l?.contains(i))return;let s={srcEvent:n};if(eo(x("clickAction"),s),x("dblClickAction")){let e=Date.now(),n=e-(q||e);q=e,n>0&&n<=250?(t&&(clearTimeout(t),t=void 0),eo(x("dblClickAction"),s)):t=setTimeout(()=>{eo(x("singleClickAction"),s)},250)}}function k(e){if(h=e,!N()||g!==$.Ready||v.scale<=1||y.scale<=1||(l?.dataset.animationName||"").indexOf("zoom")>-1)return;let t=U(y.scale);if(!t)return;let{x:n,y:i}=t;eo(X.Pan,{deltaX:n-y.x,deltaY:i-y.y})}function A(){e&&(D(e,"is-loading"),e.querySelector(".f-spinner")?.remove())}function S(){if(!e||!s)return;if(s instanceof HTMLImageElement&&!(s.complete&&s.naturalWidth)){A(),g=$.Error,l?.classList.add("has-error"),E("error");return}E("loaded");let{width:t,height:n}=F();s instanceof HTMLImageElement&&(s.setAttribute("width",t+""),s.setAttribute("height",n+"")),l&&(D(l,"has-error"),s instanceof HTMLImageElement&&(l.setAttribute("width",t+""),l.setAttribute("height",n+""),l.style.aspectRatio=`${t/n||""}`)),f=M().on("start",(e,t)=>{y={...H,...t},void 0!==t.angle&&(t.angle=90*Math.round(t.angle/90)),void 0!==t.flipX&&(t.flipX=t.flipX>0?1:-1),void 0!==t.flipY&&(t.flipY=t.flipY>0?1:-1),ei(),E("animationStart")}).on("pause",e=>{y={...H,...e}}).on("step",t=>{if(g!==$.Ready||!f)return;if(!e||!e.parentElement)return void f.end();if(v={...H,...t},N()||!x("bounds")||u?.isPointerDown()||y.scale>v.scale||y.scale<J())return void ea();let n=et(y.scale),i=!1,o=!1,r=!1,l=!1;v.x<n.x[0]&&(i=!0),v.x>n.x[1]&&(o=!0),v.y<n.y[0]&&(l=!0),v.y>n.y[1]&&(r=!0);let s=!1,c=!1,d=!1,h=!1;y.x<n.x[0]&&(s=!0),y.x>n.x[1]&&(c=!0),y.y<n.y[0]&&(h=!0),y.y>n.y[1]&&(d=!0);let m=!1;(o&&c||i&&s)&&(y.x=a(n.x[0],y.x,n.x[1]),m=!0),(r&&d||l&&h)&&(y.y=a(n.y[0],y.y,n.y[1]),m=!0),m&&f.spring({tension:94,friction:17,maxSpeed:555*y.scale,restDelta:.1,restSpeed:.1,velocity:f.getCurrentVelocities()}).from(v).to(y).start(),ea()}).on("end",()=>{en(),f?.isRunning()||(ei(),E("animationEnd"))}),function(){let e=x("gestures");e&&c&&s&&(u=P(c,e).on("start",e=>{if(!f)return;let t=e.srcEvent;N()||((v.scale>1||e.currentTouch.length>1)&&(t?.stopPropagation(),f.pause()),1===e.currentTouch.length&&E("touchStart"))}).on("move",e=>{!N()&&(1!==y.scale||e.currentTouch.length>1)&&(e.srcEvent.preventDefault(),e.srcEvent.stopPropagation())}).on("pan",e=>{if(N())return;let t=e.srcEvent;(1!==y.scale||e.currentTouch.length>1)&&(z(t),eo(X.Pan,e))}).on("swipe",e=>{!N()&&y.scale>1&&eo(X.Swipe,e)}).on("tap",e=>{E("click",e)}).on("singleTap",e=>{E("singleClick",e)}).on("doubleTap",e=>{E("dblClick",e)}).on("pinch",e=>{N()||(e.scale>J()?eo(X.ZoomIn,e):e.scale<J()?eo(X.ZoomOut,e):eo(X.Pan,e))}).on("end",e=>{N()||(e.currentTouch.length?(e.srcEvent.stopPropagation(),z(e.srcEvent),f?.end()):(ei(),en(),E("touchEnd")))}).init())}(),c&&(c.addEventListener("wheel",R,{passive:!1}),b.push(()=>{c?.removeEventListener("wheel",R,{passive:!1})})),e?.addEventListener("click",C),document?.addEventListener("mousemove",k),b.push(()=>{e?.removeEventListener("click",C),document?.removeEventListener("mousemove",k)});let i={...x("startPos")||{},...{scale:J()}};if(v={...H,...i},y={...H,...i},N()){let e=U(y.scale);if(e){let{x:t,y:n}=e;v.x=t,v.y=n,y.x=t,y.y=n}}g=$.Ready,ea(),ei(),E("ready"),requestAnimationFrame(()=>{if(A(),c&&(c.style.visibility=""),e&&l&&!d){let t=null;(d=new ResizeObserver(()=>{t||(t=requestAnimationFrame(()=>{e&&e.parentElement&&g===$.Ready&&(ei(),en(),E("refresh")),t=null}))})).observe(l),b.push(()=>{d?.disconnect(),d=void 0,t&&(cancelAnimationFrame(t),t=null)})}})}function O(){let e={top:0,left:0,width:0,height:0};if(l){let t=l.getBoundingClientRect();y.angle%180==90?(e.top=t.top+.5*t.height-.5*t.width,e.left=t.left+.5*t.width-.5*t.height,e.width=t.height,e.height=t.width):(e.top=t.top,e.left=t.left,e.width=t.width,e.height=t.height)}return e}function F(){let e=x("width"),t=x("height");if(s&&"auto"===e){let t=s.getAttribute("width");e=t?parseFloat(t+""):void 0!==s.dataset.width?parseFloat(s.dataset.width+""):c instanceof HTMLImageElement?c.naturalWidth:s instanceof HTMLImageElement?s.naturalWidth:s.getBoundingClientRect().width}else e="string"==typeof e?parseFloat(e):e;if(s&&"auto"===t){let e=s.getAttribute("height");t=e?parseFloat(e+""):void 0!==s.dataset.height?parseFloat(s.dataset.height+""):c instanceof HTMLImageElement?c.naturalHeight:s instanceof HTMLImageElement?s.naturalHeight:s.getBoundingClientRect().height}else t="string"==typeof t?parseFloat(t):t;return{width:e,height:t}}function _(){let e=O();return{width:e.width,height:e.height}}function N(){return"mousemove"===x("panMode")&&matchMedia("(hover: hover)").matches}function U(e){let t=h||x("event"),n=l?.getBoundingClientRect();if(!t||!n||e<=1)return{x:0,y:0};let i=(t.clientX||0)-n.left,o=(t.clientY||0)-n.top,{width:r,height:s}=_(),c=et(e);if(e>1){let t=x("mouseMoveFactor");t>1&&(e*=t)}let u=r*e,f=s*e,d=(u-r)*.5-i/r*100/100*(u-r),g=(f-s)*.5-o/s*100/100*(f-s);return{x:d=a(c.x[0],d,c.x[1]),y:g=a(c.y[0],g,c.y[1])}}function B(t="base"){if(!e)return 1;let n=e.getBoundingClientRect(),i=O(),{width:o,height:r}=F(),l=e=>{if("number"==typeof e)return e;switch(e){case"min":case"base":return 1;case"cover":return Math.max(n.height/i.height,n.width/i.width)||1;case"full":case"max":{let e=y.angle%180==90?r:o;return e&&i.width?e/i.width:1}}},s=x("minScale"),c=x("maxScale"),u=Math.min(l("full"),l(s)),f="number"==typeof c?l("full")*c:Math.min(l("full"),l(c));switch(t){case"min":return u;case"base":return a(u,1,f);case"cover":return l("cover");case"full":return Math.min(f,l("full"));case"max":return f}}function G(){return B("min")}function J(){return B("base")}function K(){return B("cover")}function Q(){return B("full")}function ee(){return B("max")}function et(t){let n={x:[0,0],y:[0,0]},i=e?.getBoundingClientRect();if(!i)return n;let o=O(),a=i.width,r=i.height,l=o.width,s=o.height,c=t=void 0===t?y.scale:t,u=t;if(N()&&t>1){let e=x("mouseMoveFactor");e>1&&(l*t>a+.01&&(c*=e),s*t>r+.01&&(u*=e))}return l*=c,s*=u,t>1&&(l>a&&(n.x[0]=(a-l)*.5,n.x[1]=(l-a)*.5),n.x[0]-=(o.left-i.left)*.5,n.x[1]-=(o.left-i.left)*.5,n.x[0]-=(o.left+o.width-i.right)*.5,n.x[1]-=(o.left+o.width-i.right)*.5,s>r&&(n.y[0]=(r-s)*.5,n.y[1]=(s-r)*.5),n.y[0]-=(o.top-i.top)*.5,n.y[1]-=(o.top-i.top)*.5,n.y[0]-=(o.top+o.height-i.bottom)*.5,n.y[1]-=(o.top+o.height-i.bottom)*.5),n}function en(){if(!x("bounds")||g!==$.Ready||!e?.parentElement||!f)return;let t=G(),n=ee(),i=a(t,y.scale,n);if(y.scale<t-.01||y.scale>n+.01)return void eo(X.ZoomTo,{scale:i});if(f.isRunning()||u?.isPointerDown())return;let o=et(i);y.x<o.x[0]||y.x>o.x[1]||y.y<o.y[0]||y.y>o.y[1]?(y.x=a(o.x[0],y.x,o.x[1]),y.y=a(o.y[0],y.y,o.y[1]),f.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:f.getCurrentVelocities()}),f.from(v).to(y).start()):ea()}function ei(){if(!e||!e.parentElement||!l)return;let t=ef(),n=ed(),i=eh(),o=eg(),a=el(),r=es();l.classList.toggle("is-fullsize",o),l.classList.toggle("is-expanded",i),l.classList.toggle("is-dragging",n),l.classList.toggle("can-drag",t),l.classList.toggle("will-zoom-in",a),l.classList.toggle("will-zoom-out",r);let s=ec(),c=eu(),u=g!==$.Ready;for(let t of e?.querySelectorAll("[data-panzoom-action]")||[]){let e=t.dataset.panzoomAction,n=!1;if(u)n=!0;else switch(e){case X.ZoomIn:s||(n=!0);break;case X.ZoomOut:c||(n=!0);break;case X.ToggleFull:s||c||(n=!0);let i=t.querySelector("g");i&&(i.style.display=o?"none":"");break;case X.ToggleCover:case X.ToggleMax:s||c||(n=!0)}n?(t.setAttribute("aria-disabled",""),t.setAttribute("tabindex","-1")):(t.removeAttribute("aria-disabled"),t.removeAttribute("tabindex"))}}function eo(t,n){if(!e||!s||!f||t===X.Swipe&&Math.abs(f.getCurrentVelocities().scale)>.01)return;let i={...y},o=et(N()?y.scale:v.scale),r=f.getCurrentVelocities(),l=O();n=n||{};let c=(n.currentTouch?.length||0)>1,d=n.velocityX||0,h=n.velocityY||0,g=n.center;!g&&n.srcEvent&&(g=L(T(n.srcEvent)));let m=n.deltaX||0,p=n.deltaY||0;switch(t){case X.MoveRight:m=n.deltaX||100;break;case X.MoveLeft:m=n.deltaX||-100;break;case X.MoveUp:p=n.deltaY||-100;break;case X.MoveDown:p=n.deltaY||100}let b=[];switch(t){case X.Reset:(y={...H}).scale=J();break;case X.Pan:case X.Move:case X.MoveLeft:case X.MoveRight:case X.MoveUp:case X.MoveDown:if(u?.isPointerDown()){let e=1,t=1;y.x<=o.x[0]&&d<=0&&(e=.2*Math.max(.01,1-Math.abs(1/l.width*Math.abs(y.x-o.x[0])))),y.x>=o.x[1]&&d>=0&&(e=.2*Math.max(.01,1-Math.abs(1/l.width*Math.abs(y.x-o.x[1])))),y.y<=o.y[0]&&h<=0&&(t=.2*Math.max(.01,1-Math.abs(1/l.height*Math.abs(y.y-o.y[0])))),y.y>=o.y[1]&&h>=0&&(t=.2*Math.max(.01,1-Math.abs(1/l.height*Math.abs(y.y-o.y[1])))),y.x+=m*e,y.y+=p*t}else y.x=a(o.x[0],y.x+m,o.x[1]),y.y=a(o.y[0],y.y+p,o.y[1]);break;case X.Swipe:let w=(e=0)=>Math.sign(e)*Math.pow(Math.abs(e),1.5);y.x+=a(-1e3,w(d),1e3),y.y+=a(-1e3,w(h),1e3),h&&!d&&(y.x=a(o.x[0],y.x,o.x[1])),!h&&d&&(y.y=a(o.y[0],y.y,o.y[1])),r.x=d,r.y=h;break;case X.ZoomTo:y.scale=n.scale||1;break;case X.ZoomIn:y.scale=y.scale*(n.scale||2),c||(y.scale=Math.min(y.scale,ee()));break;case X.ZoomOut:y.scale=y.scale*(n.scale||.5),c||(y.scale=Math.max(y.scale,G()));break;case X.ToggleCover:b=[J(),K()];break;case X.ToggleFull:b=[J(),Q()];break;case X.ToggleMax:b=[J(),ee()];break;case X.IterateZoom:b=[J(),Q(),ee()];break;case X.Zoom:let M=Q();y.scale>=M-.05?y.scale=J():y.scale=Math.min(M,y.scale*(n.scale||2));break;case X.RotateCW:y.angle+=90;break;case X.RotateCCW:y.angle-=90;break;case X.FlipX:y.flipX*=-1;break;case X.FlipY:y.flipY*=-1}if(void 0!==v.angle&&Math.abs(v.angle)>=360&&(y.angle-=360*Math.floor(v.angle/360),v.angle-=360*Math.floor(v.angle/360)),b.length){let e=b.findIndex(e=>e>y.scale+1/Z);y.scale=b[e]||b[0]}if(c&&(y.scale=a(G()*(c?.8:1),y.scale,ee()*(c?1.6:1))),N()){let e=U(y.scale);if(e){let{x:t,y:n}=e;y.x=t,y.y=n}}else if(y.scale!==i.scale){let t=0,n=0;if(g)t=g.x,n=g.y;else{let i=e.getBoundingClientRect();t=i.x+.5*i.width,n=i.y+.5*i.height}let r=t-l.left,s=n-l.top;r-=.5*l.width,s-=.5*l.height;let u=(r-i.x)/i.scale,f=(s-i.y)/i.scale;y.x=r-u*y.scale,y.y=s-f*y.scale,!c&&x("bounds")&&(o=et(y.scale),y.x=a(o.x[0],y.x,o.x[1]),y.y=a(o.y[0],y.y,o.y[1]))}if(t===X.Swipe){let e=500*y.scale;f.spring({tension:94,friction:17,maxSpeed:e,restDelta:.1,restSpeed:.1,velocity:r})}else t===X.Pan||c?f.spring({tension:900,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):f.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:r});t===X.Reset&&0===n.velocity?v={...y}:f.from(v).to(y).start(),E("action",t)}function ea(){if(!s)return;if(l){let{width:e,height:t}=F();l.style.maxWidth=`min(${e}px, 100%)`,l.style.maxHeight=`min(${t}px, 100%)`}let{x:t,y:n,scale:i,angle:o,flipX:a,flipY:r}=v,u=`translate3d(${t}px, ${n}px, 0)`;1!==a||1!==r?u+=` scaleX(${i*a}) scaleY(${i*r})`:1!==i&&(u+=` scale(${i})`),o%360!=0&&(u+=` rotate(${o}deg)`);let f=function(){let{width:t,height:n}=F(),{width:i,height:o}=_();if(!e)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:i,fitHeight:o,fullWidth:t,fullHeight:n};let{x:a,y:r,scale:l,angle:s,flipX:c,flipY:u}=v,f=1/Q(),d=t,h=n,g=v.scale*f,m=y.scale*f,p=Math.max(i,o),b=Math.min(i,o);t>n?(d=p,h=b):(d=b,h=p),g=t>n?p*l/t||1:p*l/n||1;let x=d?t*m:0,w=h?n*m:0,M=d&&h?t*g/x:0;return{x:a=a+.5*d-.5*x,y:r=r+.5*h-.5*w,width:x,height:w,scale:M,flipX:c,flipY:u,angle:s,fitWidth:i,fitHeight:o,fullWidth:t,fullHeight:n}}();if(f){let{x:e,y:t,width:n,height:i,scale:a,flipX:r,flipY:l}=f,s=`translate(${Y(e)}px, ${Y(t)}px)`;1!==r||1!==l?s+=` scaleX(${Y(a*r)}) scaleY(${Y(a*l)})`:s+=` scale(${Y(a)})`,0!==o&&(s+=` rotate(${o}deg)`),c&&(c.style.width=`${Y(n)}px`,c.style.height=`${Y(i)}px`,c.style.transform=`${s}`)}E("render")}function er(){let e=y.scale,t=void 0,n=x("clickAction"),i=J();if(n){let o=[];switch(n){case X.ZoomIn:i=e*(t||2);break;case X.ZoomOut:i=e*(t||.5);break;case X.ToggleCover:o=[J(),K()];break;case X.ToggleFull:o=[J(),Q()];break;case X.ToggleMax:o=[J(),ee()];break;case X.IterateZoom:o=[J(),Q(),ee()];break;case X.Zoom:let a=Q();i=e>=a-.05?J():Math.min(a,e*(t||2))}if(o.length){let t=o.findIndex(t=>t>e+1/Z);i=o[t]||J()}}return a(G(),i,ee())}function el(){return g===$.Ready&&er()>y.scale}function es(){return g===$.Ready&&er()<y.scale}function ec(){return g===$.Ready&&y.scale<ee()}function eu(){return g===$.Ready&&y.scale>G()}function ef(){return g===$.Ready&&eh()&&!!u&&!N()}function ed(){return g===$.Ready&&u?.isPointerDown()&&!N()}function eh(){return g===$.Ready&&y.scale>J()}function eg(){return g===$.Ready&&y.scale>=Q()}let em={canDrag:ef,canZoomIn:ec,canZoomOut:eu,destroy:function(){for(let e of(E("destroy"),Object.values(p)))e?.destroy(em);for(let e of b)e();return l&&(l.style.aspectRatio="",l.style.maxWidth="",l.style.maxHeight=""),c&&(c.style.width="",c.style.height="",c.style.transform=""),l=void 0,s=void 0,c=void 0,v={...H},y={...H},f?.destroy(),f=void 0,u?.destroy(),u=void 0,g=$.Destroyed,em},emit:E,execute:eo,getBoundaries:et,getContainer:function(){return e},getContent:function(){return s},getFullDim:F,getGestures:function(){return u},getMousemovePos:U,getOptions:function(){return m},getScale:B,getState:function(){return g},getTransform:function(e){return!0===e?y:v},getTween:function(){return f},getViewport:function(){return c},getWrapper:function(){return l},init:function(){return g=$.Init,E("init"),function(){for(let[e,t]of Object.entries({...r,...m.plugins||{}}))if(e&&!p[e]&&t instanceof Function){let n=t();n.init(em),p[e]=n}E("initPlugins")}(),function(){let t={...j.classes,...x("classes")};if(e&&(I(e,t.container),s=e.querySelector("."+t.content))){if(s.setAttribute("draggable","false"),(l=e.querySelector("."+t.wrapper))||(I(l=document.createElement("div"),t.wrapper),s.insertAdjacentElement("beforebegin",l),l.insertAdjacentElement("afterbegin",s)),!(c=e.querySelector("."+t.viewport))){I(c=document.createElement("div"),t.viewport);let e=s.cloneNode(!0);e.removeAttribute("id"),l.insertAdjacentElement("afterbegin",e),l.insertAdjacentElement("beforeend",c),c.insertAdjacentElement("afterbegin",s)}if(s.style.width="",s.style.height="",s.style.visibility="",s instanceof HTMLPictureElement&&(s=s.querySelector("img")),c instanceof HTMLPictureElement&&(c=c.querySelector("img")),c&&(c.style.visibility="hidden",x("protected"))){c.addEventListener("contextmenu",e=>{e.preventDefault()});let e=document.createElement("div");I(e,"f-panzoom__protected"),c.appendChild(e)}E("initLayout")}}(),function(){if(!e||!s)return;if(!(s instanceof HTMLImageElement))return S();g=$.Loading,e.classList.add("is-loading"),E("loading");let t=()=>{s&&s instanceof HTMLImageElement&&s.decode().then(()=>{requestAnimationFrame(()=>{S()})}).catch(()=>{S()})};if(s instanceof HTMLImageElement&&s.src&&s.complete)return t();(function(){if(!e||e?.querySelector(".f-spinner"))return;let t=o(x("spinnerTpl"));t&&(t.classList.add("f-spinner"),e.classList.add("is-loading"),l?.insertAdjacentElement("afterbegin",t))})(),s.addEventListener("load",t,!1),s.addEventListener("error",t,!1),b.push(()=>{s?.removeEventListener("load",t,!1),s?.removeEventListener("error",t,!1)})}(),em},isDragging:ed,isExpanded:eh,isFullsize:eg,localize:function(e,t=[]){let n=x("l10n")||{};e=String(e).replace(/\{\{(\w+)\}\}/g,(e,t)=>n[t]||e);for(let n=0;n<t.length;n++)e=e.split(t[n][0]).join(t[n][1]);return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>t)},off:function(e,t){for(let n of e instanceof Array?e:[e])w.has(n)&&w.set(n,w.get(n).filter(e=>e!==t));return em},on:function(e,t){for(let n of e instanceof Array?e:[e])w.set(n,[...w.get(n)||[],t]);return em},version:"6.0.28",willZoomIn:el,willZoomOut:es};return em};N.l10n={en_EN:F},N.getDefaults=()=>j,e.PANZOOM_DEFAULT_POS=H,e.Panzoom=N,e.PanzoomAction=X,e.PanzoomState=$,e.PanzoomZoomLevel=_});